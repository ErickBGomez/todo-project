/******/ (() => { // webpackBootstrap
/******/ 	var __webpack_modules__ = ({

/***/ "./src/img/lists/default.svg":
/*!***********************************!*\
  !*** ./src/img/lists/default.svg ***!
  \***********************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\"><path d=\"M361.913-239.283h236.413q17.717 0 29.696-12.097Q640-263.478 640-281.196q0-17.717-11.978-29.695-11.979-11.979-29.696-11.979H361.674q-17.717 0-29.696 11.979Q320-298.913 320-281.196q0 17.718 12.098 29.816 12.098 12.097 29.815 12.097Zm0-160h236.413q17.717 0 29.696-12.097Q640-423.478 640-441.196q0-17.717-11.978-29.695-11.979-11.979-29.696-11.979H361.674q-17.717 0-29.696 11.979Q320-458.913 320-441.196q0 17.718 12.098 29.816 12.098 12.097 29.815 12.097ZM242.87-71.869q-37.783 0-64.392-26.61-26.609-26.608-26.609-64.391v-634.26q0-37.783 26.609-64.392 26.609-26.609 64.392-26.609h282.934q18.153 0 34.685 6.837 16.533 6.837 29.207 19.511l192.087 192.087q12.674 12.674 19.511 29.207 6.837 16.532 6.837 34.685v442.934q0 37.783-26.609 64.392Q754.913-71.87 717.13-71.87H242.87ZM517.13-642.63q0 19.152 13.174 32.326t32.326 13.174h154.5l-200-200v154.5Z\"></path></svg>"

/***/ }),

/***/ "./src/img/tasks/date-fill.svg":
/*!*************************************!*\
  !*** ./src/img/tasks/date-fill.svg ***!
  \*************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\"><path d=\"M480-396.923q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038T480-467.691q14.692 0 25.038 10.346t10.346 25.038q0 14.692-10.346 25.038T480-396.923Zm-160 0q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038T320-467.691q14.692 0 25.038 10.346t10.346 25.038q0 14.692-10.346 25.038T320-396.923Zm320 0q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038T640-467.691q14.692 0 25.038 10.346t10.346 25.038q0 14.692-10.346 25.038T640-396.923ZM480-240q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038 10.346-10.347 25.038-10.347t25.038 10.347q10.346 10.346 10.346 25.038t-10.346 25.038Q494.692-240 480-240Zm-160 0q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038 10.346-10.347 25.038-10.347t25.038 10.347q10.346 10.346 10.346 25.038t-10.346 25.038Q334.692-240 320-240Zm320 0q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038 10.346-10.347 25.038-10.347t25.038 10.347q10.346 10.346 10.346 25.038t-10.346 25.038Q654.692-240 640-240ZM212.309-100.001q-30.308 0-51.308-21t-21-51.308v-535.382q0-30.308 21-51.308t51.308-21h55.385v-84.615h61.537v84.615h303.076v-84.615h59.999v84.615h55.385q30.308 0 51.308 21t21 51.308v535.382q0 30.308-21 51.308t-51.308 21H212.309Zm0-59.999h535.382q4.616 0 8.463-3.846 3.846-3.847 3.846-8.463v-375.382H200v375.382q0 4.616 3.846 8.463 3.847 3.846 8.463 3.846Z\"></path></svg>"

/***/ }),

/***/ "./src/img/tasks/date-nofill.svg":
/*!***************************************!*\
  !*** ./src/img/tasks/date-nofill.svg ***!
  \***************************************/
/***/ ((module) => {

module.exports = "<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 -960 960 960\"><path d=\"M212.309-100.001q-30.308 0-51.308-21t-21-51.308v-535.382q0-30.308 21-51.308t51.308-21h55.385v-84.615h61.537v84.615h303.076v-84.615h59.999v84.615h55.385q30.308 0 51.308 21t21 51.308v535.382q0 30.308-21 51.308t-51.308 21H212.309Zm0-59.999h535.382q4.616 0 8.463-3.846 3.846-3.847 3.846-8.463v-375.382H200v375.382q0 4.616 3.846 8.463 3.847 3.846 8.463 3.846ZM200-607.69h560v-100.001q0-4.616-3.846-8.463-3.847-3.846-8.463-3.846H212.309q-4.616 0-8.463 3.846-3.846 3.847-3.846 8.463v100.001Zm0 0V-720v112.31Zm280 210.767q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038T480-467.691q14.692 0 25.038 10.346t10.346 25.038q0 14.692-10.346 25.038T480-396.923Zm-160 0q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038T320-467.691q14.692 0 25.038 10.346t10.346 25.038q0 14.692-10.346 25.038T320-396.923Zm320 0q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038T640-467.691q14.692 0 25.038 10.346t10.346 25.038q0 14.692-10.346 25.038T640-396.923ZM480-240q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038 10.346-10.347 25.038-10.347t25.038 10.347q10.346 10.346 10.346 25.038t-10.346 25.038Q494.692-240 480-240Zm-160 0q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038 10.346-10.347 25.038-10.347t25.038 10.347q10.346 10.346 10.346 25.038t-10.346 25.038Q334.692-240 320-240Zm320 0q-14.692 0-25.038-10.346t-10.346-25.038q0-14.692 10.346-25.038 10.346-10.347 25.038-10.347t25.038 10.347q10.346 10.346 10.346 25.038t-10.346 25.038Q654.692-240 640-240Z\"></path></svg>"

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/compat get default export */
/******/ 	(() => {
/******/ 		// getDefaultExport function for compatibility with non-harmony modules
/******/ 		__webpack_require__.n = (module) => {
/******/ 			var getter = module && module.__esModule ?
/******/ 				() => (module['default']) :
/******/ 				() => (module);
/******/ 			__webpack_require__.d(getter, { a: getter });
/******/ 			return getter;
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/define property getters */
/******/ 	(() => {
/******/ 		// define getter functions for harmony exports
/******/ 		__webpack_require__.d = (exports, definition) => {
/******/ 			for(var key in definition) {
/******/ 				if(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {
/******/ 					Object.defineProperty(exports, key, { enumerable: true, get: definition[key] });
/******/ 				}
/******/ 			}
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/hasOwnProperty shorthand */
/******/ 	(() => {
/******/ 		__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be in strict mode.
(() => {
"use strict";
/*!******************************!*\
  !*** ./src/design/inputs.js ***!
  \******************************/
__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   appendDateInput: () => (/* binding */ appendDateInput),
/* harmony export */   appendDialogButtons: () => (/* binding */ appendDialogButtons),
/* harmony export */   appendOptionsButton: () => (/* binding */ appendOptionsButton),
/* harmony export */   appendSelectInput: () => (/* binding */ appendSelectInput),
/* harmony export */   appendSelectInputGrid: () => (/* binding */ appendSelectInputGrid),
/* harmony export */   appendTextAreaInput: () => (/* binding */ appendTextAreaInput),
/* harmony export */   appendTextInput: () => (/* binding */ appendTextInput),
/* harmony export */   selectDateValue: () => (/* binding */ selectDateValue),
/* harmony export */   selectOptionValue: () => (/* binding */ selectOptionValue),
/* harmony export */   selectOptionValueGrid: () => (/* binding */ selectOptionValueGrid)
/* harmony export */ });
/* harmony import */ var _img_lists_default_svg__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../img/lists/default.svg */ "./src/img/lists/default.svg");
/* harmony import */ var _img_lists_default_svg__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_img_lists_default_svg__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _img_tasks_date_nofill_svg__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../img/tasks/date-nofill.svg */ "./src/img/tasks/date-nofill.svg");
/* harmony import */ var _img_tasks_date_nofill_svg__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_img_tasks_date_nofill_svg__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _img_tasks_date_fill_svg__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../img/tasks/date-fill.svg */ "./src/img/tasks/date-fill.svg");
/* harmony import */ var _img_tasks_date_fill_svg__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_img_tasks_date_fill_svg__WEBPACK_IMPORTED_MODULE_2__);
// Icons




// Custom inputs controllers
const appendDialogButtons = (primaryLabel, secondaryLabel = "Cancel") => {
  const buttons = document.createElement("div");
  buttons.className = "dialog-buttons";

  const primaryButton = document.createElement("button");
  primaryButton.className = "primary";
  primaryButton.textContent = primaryLabel;

  const secondaryButton = document.createElement("button");
  secondaryButton.className = "secondary";
  secondaryButton.textContent = secondaryLabel;

  buttons.appendChild(primaryButton);
  buttons.appendChild(secondaryButton);

  return buttons;
};

const appendTextInput = (
  inputId,
  placeholder,
  maxLength = 10,
  autoFocus = false,
  initialValue = null
) => {
  const container = document.createElement("div");
  container.className = "text-input-container";

  const input = document.createElement("input");
  input.type = "text";
  input.id = inputId;
  input.name = inputId;
  input.placeholder = placeholder;
  input.maxLength = maxLength.toString();
  input.autofocus = autoFocus;
  input.value = initialValue;

  const textCounter = document.createElement("span");
  textCounter.className = "text-counter";

  const currentTextCount = document.createElement("span");
  currentTextCount.className = "current-count";
  currentTextCount.textContent = input.value.length;

  const counterLimit = document.createElement("span");
  counterLimit.className = "counter-limit";
  counterLimit.textContent = ` / ${maxLength}`;

  textCounter.appendChild(currentTextCount);
  textCounter.appendChild(counterLimit);

  container.appendChild(input);
  container.appendChild(textCounter);

  addCountLengthEvent(input, currentTextCount);

  return container;
};

const appendTextAreaInput = (
  inputId,
  placeholder,
  maxLength = 10,
  rows = 1,
  autoFocus = false,
  initialValue = null
) => {
  const container = document.createElement("div");
  container.className = "textarea-input-container";

  const input = document.createElement("textarea");
  input.id = inputId;
  input.name = inputId;
  input.placeholder = placeholder;
  input.maxLength = maxLength.toString();
  input.rows = rows.toString();
  input.autofocus = autoFocus;
  input.value = initialValue;

  const textCounter = document.createElement("span");
  textCounter.className = "text-counter";

  const currentTextCount = document.createElement("span");
  currentTextCount.className = "current-count";
  currentTextCount.textContent = input.value.length;

  const counterLimit = document.createElement("span");
  counterLimit.className = "counter-limit";
  counterLimit.textContent = ` / ${maxLength}`;

  textCounter.appendChild(currentTextCount);
  textCounter.appendChild(counterLimit);

  container.appendChild(input);
  container.appendChild(textCounter);

  addCountLengthEvent(input, currentTextCount);

  return container;
};

const appendSelectInput = (
  inputId,
  icon,
  optionsArray = [{ icon: (_img_lists_default_svg__WEBPACK_IMPORTED_MODULE_0___default()), name: "No options" }],
  initialOptionIndex = 0
) => {
  const container = document.createElement("div");
  container.className = "select-input";
  if (inputId) container.id = inputId;

  const inputButton = document.createElement("button");
  inputButton.className = "select-button";

  const buttonLabel = document.createElement("span");
  buttonLabel.className = "button-label";

  const buttonIcon = document.createElement("span");
  buttonIcon.className = "button-icon";
  buttonIcon.innerHTML = icon;

  // Options
  const optionsContainer = document.createElement("div");
  optionsContainer.className = "options";

  optionsArray.forEach((option) => {
    const optionElement = document.createElement("span");
    optionElement.className = "option";
    optionElement.dataset.value = option.name;

    const optionIcon = document.createElement("span");
    optionIcon.className = "option-icon";
    optionIcon.innerHTML = option.icon;

    const optionLabel = document.createElement("span");
    optionLabel.className = "option-label";
    optionLabel.textContent = option.name;

    optionElement.appendChild(optionIcon);
    optionElement.appendChild(optionLabel);

    optionsContainer.appendChild(optionElement);
  });

  inputButton.appendChild(buttonIcon);
  inputButton.appendChild(buttonLabel);

  container.appendChild(inputButton);
  container.appendChild(optionsContainer);

  // Auto-select first option
  if (initialOptionIndex < 0 || initialOptionIndex >= optionsArray.length)
    initialOptionIndex = 0;

  selectOptionValue(
    container,
    optionsContainer.childNodes[initialOptionIndex].dataset.value
  );

  // Select list Events
  addExpandOptionsEvent(container, inputButton);
  addSelectOptionValueEvent(container);

  return container;
};

const appendSelectInputGrid = (
  inputId,
  optionsArray = [(_img_lists_default_svg__WEBPACK_IMPORTED_MODULE_0___default())],
  initialOptionIndex = 0
) => {
  const container = document.createElement("div");
  container.className = "select-input-grid";
  if (inputId) container.id = inputId;

  const inputButton = document.createElement("button");
  inputButton.className = "select-button";

  const buttonIcon = document.createElement("span");
  buttonIcon.className = "button-icon";

  // Options
  const optionsContainer = document.createElement("div");
  optionsContainer.className = "options-grid";

  optionsArray.forEach((optionIcon) => {
    const optionElement = document.createElement("span");
    optionElement.className = "option";
    optionElement.innerHTML = optionIcon;

    optionsContainer.appendChild(optionElement);
  });

  inputButton.appendChild(buttonIcon);

  container.appendChild(inputButton);
  container.appendChild(optionsContainer);

  // Auto-select first option
  if (initialOptionIndex < 0 || initialOptionIndex >= optionsArray.length)
    initialOptionIndex = 0;

  selectOptionValueGrid(container, initialOptionIndex);

  // Select list grid events
  addExpandOptionsEvent(container, inputButton);
  addSelectOptionValueGridEvent(container);

  return container;
};

const appendDateInput = (inputId, icon) => {
  const container = document.createElement("div");
  container.id = inputId;

  const input = document.createElement("input");
  input.type = "date";
  input.className = "date-element";

  container.dataset.value = input.value;

  const inputButton = document.createElement("button");
  inputButton.className = "date-button";

  const buttonLabel = document.createElement("span");
  buttonLabel.className = "button-label";
  buttonLabel.textContent = "Date";

  const buttonIcon = document.createElement("span");
  buttonIcon.className = "button-icon";
  buttonIcon.innerHTML = icon;

  inputButton.appendChild(buttonIcon);
  inputButton.appendChild(buttonLabel);

  container.appendChild(input);
  container.appendChild(inputButton);

  addShowDatePickerEvent(inputButton, input);
  changeDateValueEvent(container);

  return container;
};

const appendOptionsButton = (
  icon,
  controllerClass,
  optionsArray = [{ label: "Option", icon: (_img_lists_default_svg__WEBPACK_IMPORTED_MODULE_0___default()), optionClass: "option" }]
) => {
  const container = document.createElement("div");
  container.classList.add("options-controller");
  container.classList.add(controllerClass);

  const button = document.createElement("button");
  button.className = "options-controller-button";

  const buttonIcon = document.createElement("span");
  buttonIcon.className = "button-icon";
  buttonIcon.innerHTML = icon;

  const optionsContainer = document.createElement("div");
  optionsContainer.className = "options";

  optionsArray.forEach((option) => {
    const optionElement = document.createElement("span");
    optionElement.classList.add("option");
    optionElement.classList.add(option.optionClass);

    const optionIcon = document.createElement("span");
    optionIcon.className = "option-icon";
    optionIcon.innerHTML = option.icon;

    const optionLabel = document.createElement("span");
    optionLabel.className = "option-label";
    optionLabel.textContent = option.label;

    optionElement.appendChild(optionIcon);
    optionElement.appendChild(optionLabel);

    optionsContainer.appendChild(optionElement);
  });

  button.appendChild(buttonIcon);

  container.appendChild(button);
  container.appendChild(optionsContainer);

  addExpandOptionsEvent(container, button);
  addCloseOptionsEvent(container, optionsContainer.childNodes);

  return container;
};

// Custom inputs events
const addCountLengthEvent = (input, counter) => {
  input.addEventListener(
    "input",
    () => (counter.textContent = input.value.length)
  );
};

const addExpandOptionsEvent = (container, expandButton) => {
  // const button = container.querySelector(".select-button");

  expandButton.addEventListener("click", () =>
    container.classList.toggle("expand")
  );
};

const addCloseOptionsEvent = (container, optionButtons) => {
  optionButtons.forEach((option) =>
    option.addEventListener("click", () => container.classList.remove("expand"))
  );
};

const selectOptionValue = (selectInput, optionValue) => {
  const buttonLabel = selectInput.querySelector(".button-label");
  const buttonIcon = selectInput.querySelector(".button-icon");
  const option = selectInput.querySelector(
    `.option[data-value="${optionValue}"]`
  );
  const optionIcon = option.querySelector(".option-icon");

  selectInput.dataset.value = option.dataset.value;
  buttonLabel.textContent = option.dataset.value;
  buttonIcon.innerHTML = optionIcon.innerHTML; // Fix this
};

const addSelectOptionValueEvent = (selectInput) => {
  const options = selectInput.querySelectorAll(".option");

  options.forEach((option) => {
    option.addEventListener("click", () => {
      selectOptionValue(selectInput, option.dataset.value);
      selectInput.classList.remove("expand");
    });
  });
};

const selectOptionValueGrid = (selectInputGrid, optionIndex) => {
  const buttonIcon = selectInputGrid.querySelector(".button-icon");
  const option = selectInputGrid.querySelectorAll(".option")[optionIndex];

  buttonIcon.innerHTML = option.innerHTML;
};

const addSelectOptionValueGridEvent = (selectInputGrid) => {
  const options = selectInputGrid.querySelectorAll(".option");

  options.forEach((option, index) => {
    option.addEventListener("click", () => {
      selectOptionValueGrid(selectInputGrid, index);
      selectInputGrid.classList.remove("expand");
    });
  });
};

const changeDateValueEvent = (inputContainer) => {
  const dateInput = inputContainer.querySelector("input.date-element");

  dateInput.addEventListener("change", () =>
    selectDateValue(inputContainer, dateInput.value)
  );
};

const selectDateValue = (inputContainer, newValue) => {
  const input = inputContainer.querySelector("input.date-element");
  const buttonLabel = inputContainer.querySelector(".button-label");
  const buttonIcon = inputContainer.querySelector(".button-icon");

  inputContainer.dataset.value = newValue;
  input.value = newValue;
  buttonLabel.textContent = newValue || "Date";
  buttonIcon.innerHTML = newValue ? (_img_tasks_date_fill_svg__WEBPACK_IMPORTED_MODULE_2___default()) : (_img_tasks_date_nofill_svg__WEBPACK_IMPORTED_MODULE_1___default());
};

const addShowDatePickerEvent = (inputButton, dateInput) => {
  inputButton.addEventListener("click", () => dateInput.showPicker());
};



})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5wdXRzLmJ1bmRsZS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7OztBQ0FBOzs7Ozs7Ozs7O0FDQUE7Ozs7OztVQ0FBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7O1VBRUE7VUFDQTs7VUFFQTtVQUNBO1VBQ0E7Ozs7O1dDdEJBO1dBQ0E7V0FDQTtXQUNBO1dBQ0E7V0FDQSxpQ0FBaUMsV0FBVztXQUM1QztXQUNBOzs7OztXQ1BBO1dBQ0E7V0FDQTtXQUNBO1dBQ0EseUNBQXlDLHdDQUF3QztXQUNqRjtXQUNBO1dBQ0E7Ozs7O1dDUEE7Ozs7O1dDQUE7V0FDQTtXQUNBO1dBQ0EsdURBQXVELGlCQUFpQjtXQUN4RTtXQUNBLGdEQUFnRCxhQUFhO1dBQzdEOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUNOQTtBQUNrRDtBQUNXO0FBQ0o7O0FBRXpEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQ0FBbUMsVUFBVTs7QUFFN0M7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsbUNBQW1DLFVBQVU7O0FBRTdDO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixNQUFNLCtEQUFVLHNCQUFzQjtBQUMxRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esa0JBQWtCLCtEQUFVO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0IsdUJBQXVCLCtEQUFVLHlCQUF5QjtBQUM5RTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMkJBQTJCLFlBQVk7QUFDdkM7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsK0NBQStDO0FBQy9DOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGlFQUFlLEdBQUcsbUVBQWlCO0FBQ3ZFOztBQUVBO0FBQ0E7QUFDQTs7QUFhRSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tcHJvamVjdC8uL3NyYy9pbWcvbGlzdHMvZGVmYXVsdC5zdmciLCJ3ZWJwYWNrOi8vdG9kby1wcm9qZWN0Ly4vc3JjL2ltZy90YXNrcy9kYXRlLWZpbGwuc3ZnIiwid2VicGFjazovL3RvZG8tcHJvamVjdC8uL3NyYy9pbWcvdGFza3MvZGF0ZS1ub2ZpbGwuc3ZnIiwid2VicGFjazovL3RvZG8tcHJvamVjdC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90b2RvLXByb2plY3Qvd2VicGFjay9ydW50aW1lL2NvbXBhdCBnZXQgZGVmYXVsdCBleHBvcnQiLCJ3ZWJwYWNrOi8vdG9kby1wcm9qZWN0L3dlYnBhY2svcnVudGltZS9kZWZpbmUgcHJvcGVydHkgZ2V0dGVycyIsIndlYnBhY2s6Ly90b2RvLXByb2plY3Qvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly90b2RvLXByb2plY3Qvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly90b2RvLXByb2plY3QvLi9zcmMvZGVzaWduL2lucHV0cy5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IFwiPHN2ZyB4bWxucz1cXFwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcXFwiIHZpZXdCb3g9XFxcIjAgLTk2MCA5NjAgOTYwXFxcIj48cGF0aCBkPVxcXCJNMzYxLjkxMy0yMzkuMjgzaDIzNi40MTNxMTcuNzE3IDAgMjkuNjk2LTEyLjA5N1E2NDAtMjYzLjQ3OCA2NDAtMjgxLjE5NnEwLTE3LjcxNy0xMS45NzgtMjkuNjk1LTExLjk3OS0xMS45NzktMjkuNjk2LTExLjk3OUgzNjEuNjc0cS0xNy43MTcgMC0yOS42OTYgMTEuOTc5UTMyMC0yOTguOTEzIDMyMC0yODEuMTk2cTAgMTcuNzE4IDEyLjA5OCAyOS44MTYgMTIuMDk4IDEyLjA5NyAyOS44MTUgMTIuMDk3Wm0wLTE2MGgyMzYuNDEzcTE3LjcxNyAwIDI5LjY5Ni0xMi4wOTdRNjQwLTQyMy40NzggNjQwLTQ0MS4xOTZxMC0xNy43MTctMTEuOTc4LTI5LjY5NS0xMS45NzktMTEuOTc5LTI5LjY5Ni0xMS45NzlIMzYxLjY3NHEtMTcuNzE3IDAtMjkuNjk2IDExLjk3OVEzMjAtNDU4LjkxMyAzMjAtNDQxLjE5NnEwIDE3LjcxOCAxMi4wOTggMjkuODE2IDEyLjA5OCAxMi4wOTcgMjkuODE1IDEyLjA5N1pNMjQyLjg3LTcxLjg2OXEtMzcuNzgzIDAtNjQuMzkyLTI2LjYxLTI2LjYwOS0yNi42MDgtMjYuNjA5LTY0LjM5MXYtNjM0LjI2cTAtMzcuNzgzIDI2LjYwOS02NC4zOTIgMjYuNjA5LTI2LjYwOSA2NC4zOTItMjYuNjA5aDI4Mi45MzRxMTguMTUzIDAgMzQuNjg1IDYuODM3IDE2LjUzMyA2LjgzNyAyOS4yMDcgMTkuNTExbDE5Mi4wODcgMTkyLjA4N3ExMi42NzQgMTIuNjc0IDE5LjUxMSAyOS4yMDcgNi44MzcgMTYuNTMyIDYuODM3IDM0LjY4NXY0NDIuOTM0cTAgMzcuNzgzLTI2LjYwOSA2NC4zOTJRNzU0LjkxMy03MS44NyA3MTcuMTMtNzEuODdIMjQyLjg3Wk01MTcuMTMtNjQyLjYzcTAgMTkuMTUyIDEzLjE3NCAzMi4zMjZ0MzIuMzI2IDEzLjE3NGgxNTQuNWwtMjAwLTIwMHYxNTQuNVpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAtOTYwIDk2MCA5NjBcXFwiPjxwYXRoIGQ9XFxcIk00ODAtMzk2LjkyM3EtMTQuNjkyIDAtMjUuMDM4LTEwLjM0NnQtMTAuMzQ2LTI1LjAzOHEwLTE0LjY5MiAxMC4zNDYtMjUuMDM4VDQ4MC00NjcuNjkxcTE0LjY5MiAwIDI1LjAzOCAxMC4zNDZ0MTAuMzQ2IDI1LjAzOHEwIDE0LjY5Mi0xMC4zNDYgMjUuMDM4VDQ4MC0zOTYuOTIzWm0tMTYwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOFQzMjAtNDY3LjY5MXExNC42OTIgMCAyNS4wMzggMTAuMzQ2dDEwLjM0NiAyNS4wMzhxMCAxNC42OTItMTAuMzQ2IDI1LjAzOFQzMjAtMzk2LjkyM1ptMzIwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOFQ2NDAtNDY3LjY5MXExNC42OTIgMCAyNS4wMzggMTAuMzQ2dDEwLjM0NiAyNS4wMzhxMCAxNC42OTItMTAuMzQ2IDI1LjAzOFQ2NDAtMzk2LjkyM1pNNDgwLTI0MHEtMTQuNjkyIDAtMjUuMDM4LTEwLjM0NnQtMTAuMzQ2LTI1LjAzOHEwLTE0LjY5MiAxMC4zNDYtMjUuMDM4IDEwLjM0Ni0xMC4zNDcgMjUuMDM4LTEwLjM0N3QyNS4wMzggMTAuMzQ3cTEwLjM0NiAxMC4zNDYgMTAuMzQ2IDI1LjAzOHQtMTAuMzQ2IDI1LjAzOFE0OTQuNjkyLTI0MCA0ODAtMjQwWm0tMTYwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOCAxMC4zNDYtMTAuMzQ3IDI1LjAzOC0xMC4zNDd0MjUuMDM4IDEwLjM0N3ExMC4zNDYgMTAuMzQ2IDEwLjM0NiAyNS4wMzh0LTEwLjM0NiAyNS4wMzhRMzM0LjY5Mi0yNDAgMzIwLTI0MFptMzIwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOCAxMC4zNDYtMTAuMzQ3IDI1LjAzOC0xMC4zNDd0MjUuMDM4IDEwLjM0N3ExMC4zNDYgMTAuMzQ2IDEwLjM0NiAyNS4wMzh0LTEwLjM0NiAyNS4wMzhRNjU0LjY5Mi0yNDAgNjQwLTI0MFpNMjEyLjMwOS0xMDAuMDAxcS0zMC4zMDggMC01MS4zMDgtMjF0LTIxLTUxLjMwOHYtNTM1LjM4MnEwLTMwLjMwOCAyMS01MS4zMDh0NTEuMzA4LTIxaDU1LjM4NXYtODQuNjE1aDYxLjUzN3Y4NC42MTVoMzAzLjA3NnYtODQuNjE1aDU5Ljk5OXY4NC42MTVoNTUuMzg1cTMwLjMwOCAwIDUxLjMwOCAyMXQyMSA1MS4zMDh2NTM1LjM4MnEwIDMwLjMwOC0yMSA1MS4zMDh0LTUxLjMwOCAyMUgyMTIuMzA5Wm0wLTU5Ljk5OWg1MzUuMzgycTQuNjE2IDAgOC40NjMtMy44NDYgMy44NDYtMy44NDcgMy44NDYtOC40NjN2LTM3NS4zODJIMjAwdjM3NS4zODJxMCA0LjYxNiAzLjg0NiA4LjQ2MyAzLjg0NyAzLjg0NiA4LjQ2MyAzLjg0NlpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIm1vZHVsZS5leHBvcnRzID0gXCI8c3ZnIHhtbG5zPVxcXCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1xcXCIgdmlld0JveD1cXFwiMCAtOTYwIDk2MCA5NjBcXFwiPjxwYXRoIGQ9XFxcIk0yMTIuMzA5LTEwMC4wMDFxLTMwLjMwOCAwLTUxLjMwOC0yMXQtMjEtNTEuMzA4di01MzUuMzgycTAtMzAuMzA4IDIxLTUxLjMwOHQ1MS4zMDgtMjFoNTUuMzg1di04NC42MTVoNjEuNTM3djg0LjYxNWgzMDMuMDc2di04NC42MTVoNTkuOTk5djg0LjYxNWg1NS4zODVxMzAuMzA4IDAgNTEuMzA4IDIxdDIxIDUxLjMwOHY1MzUuMzgycTAgMzAuMzA4LTIxIDUxLjMwOHQtNTEuMzA4IDIxSDIxMi4zMDlabTAtNTkuOTk5aDUzNS4zODJxNC42MTYgMCA4LjQ2My0zLjg0NiAzLjg0Ni0zLjg0NyAzLjg0Ni04LjQ2M3YtMzc1LjM4MkgyMDB2Mzc1LjM4MnEwIDQuNjE2IDMuODQ2IDguNDYzIDMuODQ3IDMuODQ2IDguNDYzIDMuODQ2Wk0yMDAtNjA3LjY5aDU2MHYtMTAwLjAwMXEwLTQuNjE2LTMuODQ2LTguNDYzLTMuODQ3LTMuODQ2LTguNDYzLTMuODQ2SDIxMi4zMDlxLTQuNjE2IDAtOC40NjMgMy44NDYtMy44NDYgMy44NDctMy44NDYgOC40NjN2MTAwLjAwMVptMCAwVi03MjB2MTEyLjMxWm0yODAgMjEwLjc2N3EtMTQuNjkyIDAtMjUuMDM4LTEwLjM0NnQtMTAuMzQ2LTI1LjAzOHEwLTE0LjY5MiAxMC4zNDYtMjUuMDM4VDQ4MC00NjcuNjkxcTE0LjY5MiAwIDI1LjAzOCAxMC4zNDZ0MTAuMzQ2IDI1LjAzOHEwIDE0LjY5Mi0xMC4zNDYgMjUuMDM4VDQ4MC0zOTYuOTIzWm0tMTYwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOFQzMjAtNDY3LjY5MXExNC42OTIgMCAyNS4wMzggMTAuMzQ2dDEwLjM0NiAyNS4wMzhxMCAxNC42OTItMTAuMzQ2IDI1LjAzOFQzMjAtMzk2LjkyM1ptMzIwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOFQ2NDAtNDY3LjY5MXExNC42OTIgMCAyNS4wMzggMTAuMzQ2dDEwLjM0NiAyNS4wMzhxMCAxNC42OTItMTAuMzQ2IDI1LjAzOFQ2NDAtMzk2LjkyM1pNNDgwLTI0MHEtMTQuNjkyIDAtMjUuMDM4LTEwLjM0NnQtMTAuMzQ2LTI1LjAzOHEwLTE0LjY5MiAxMC4zNDYtMjUuMDM4IDEwLjM0Ni0xMC4zNDcgMjUuMDM4LTEwLjM0N3QyNS4wMzggMTAuMzQ3cTEwLjM0NiAxMC4zNDYgMTAuMzQ2IDI1LjAzOHQtMTAuMzQ2IDI1LjAzOFE0OTQuNjkyLTI0MCA0ODAtMjQwWm0tMTYwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOCAxMC4zNDYtMTAuMzQ3IDI1LjAzOC0xMC4zNDd0MjUuMDM4IDEwLjM0N3ExMC4zNDYgMTAuMzQ2IDEwLjM0NiAyNS4wMzh0LTEwLjM0NiAyNS4wMzhRMzM0LjY5Mi0yNDAgMzIwLTI0MFptMzIwIDBxLTE0LjY5MiAwLTI1LjAzOC0xMC4zNDZ0LTEwLjM0Ni0yNS4wMzhxMC0xNC42OTIgMTAuMzQ2LTI1LjAzOCAxMC4zNDYtMTAuMzQ3IDI1LjAzOC0xMC4zNDd0MjUuMDM4IDEwLjM0N3ExMC4zNDYgMTAuMzQ2IDEwLjM0NiAyNS4wMzh0LTEwLjM0NiAyNS4wMzhRNjU0LjY5Mi0yNDAgNjQwLTI0MFpcXFwiPjwvcGF0aD48L3N2Zz5cIiIsIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCIvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuX193ZWJwYWNrX3JlcXVpcmVfXy5uID0gKG1vZHVsZSkgPT4ge1xuXHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cblx0XHQoKSA9PiAobW9kdWxlWydkZWZhdWx0J10pIDpcblx0XHQoKSA9PiAobW9kdWxlKTtcblx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgeyBhOiBnZXR0ZXIgfSk7XG5cdHJldHVybiBnZXR0ZXI7XG59OyIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCIvLyBJY29uc1xuaW1wb3J0IGRlZmF1bHRTdmcgZnJvbSBcIi4uL2ltZy9saXN0cy9kZWZhdWx0LnN2Z1wiO1xuaW1wb3J0IGRhdGVVbnNlbGVjdGVkU3ZnIGZyb20gXCIuLi9pbWcvdGFza3MvZGF0ZS1ub2ZpbGwuc3ZnXCI7XG5pbXBvcnQgZGF0ZVNlbGVjdGVkU3ZnIGZyb20gXCIuLi9pbWcvdGFza3MvZGF0ZS1maWxsLnN2Z1wiO1xuXG4vLyBDdXN0b20gaW5wdXRzIGNvbnRyb2xsZXJzXG5jb25zdCBhcHBlbmREaWFsb2dCdXR0b25zID0gKHByaW1hcnlMYWJlbCwgc2Vjb25kYXJ5TGFiZWwgPSBcIkNhbmNlbFwiKSA9PiB7XG4gIGNvbnN0IGJ1dHRvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBidXR0b25zLmNsYXNzTmFtZSA9IFwiZGlhbG9nLWJ1dHRvbnNcIjtcblxuICBjb25zdCBwcmltYXJ5QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgcHJpbWFyeUJ1dHRvbi5jbGFzc05hbWUgPSBcInByaW1hcnlcIjtcbiAgcHJpbWFyeUJ1dHRvbi50ZXh0Q29udGVudCA9IHByaW1hcnlMYWJlbDtcblxuICBjb25zdCBzZWNvbmRhcnlCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBzZWNvbmRhcnlCdXR0b24uY2xhc3NOYW1lID0gXCJzZWNvbmRhcnlcIjtcbiAgc2Vjb25kYXJ5QnV0dG9uLnRleHRDb250ZW50ID0gc2Vjb25kYXJ5TGFiZWw7XG5cbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChwcmltYXJ5QnV0dG9uKTtcbiAgYnV0dG9ucy5hcHBlbmRDaGlsZChzZWNvbmRhcnlCdXR0b24pO1xuXG4gIHJldHVybiBidXR0b25zO1xufTtcblxuY29uc3QgYXBwZW5kVGV4dElucHV0ID0gKFxuICBpbnB1dElkLFxuICBwbGFjZWhvbGRlcixcbiAgbWF4TGVuZ3RoID0gMTAsXG4gIGF1dG9Gb2N1cyA9IGZhbHNlLFxuICBpbml0aWFsVmFsdWUgPSBudWxsXG4pID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29udGFpbmVyLmNsYXNzTmFtZSA9IFwidGV4dC1pbnB1dC1jb250YWluZXJcIjtcblxuICBjb25zdCBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcbiAgaW5wdXQudHlwZSA9IFwidGV4dFwiO1xuICBpbnB1dC5pZCA9IGlucHV0SWQ7XG4gIGlucHV0Lm5hbWUgPSBpbnB1dElkO1xuICBpbnB1dC5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuICBpbnB1dC5tYXhMZW5ndGggPSBtYXhMZW5ndGgudG9TdHJpbmcoKTtcbiAgaW5wdXQuYXV0b2ZvY3VzID0gYXV0b0ZvY3VzO1xuICBpbnB1dC52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcblxuICBjb25zdCB0ZXh0Q291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICB0ZXh0Q291bnRlci5jbGFzc05hbWUgPSBcInRleHQtY291bnRlclwiO1xuXG4gIGNvbnN0IGN1cnJlbnRUZXh0Q291bnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgY3VycmVudFRleHRDb3VudC5jbGFzc05hbWUgPSBcImN1cnJlbnQtY291bnRcIjtcbiAgY3VycmVudFRleHRDb3VudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlLmxlbmd0aDtcblxuICBjb25zdCBjb3VudGVyTGltaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgY291bnRlckxpbWl0LmNsYXNzTmFtZSA9IFwiY291bnRlci1saW1pdFwiO1xuICBjb3VudGVyTGltaXQudGV4dENvbnRlbnQgPSBgIC8gJHttYXhMZW5ndGh9YDtcblxuICB0ZXh0Q291bnRlci5hcHBlbmRDaGlsZChjdXJyZW50VGV4dENvdW50KTtcbiAgdGV4dENvdW50ZXIuYXBwZW5kQ2hpbGQoY291bnRlckxpbWl0KTtcblxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dENvdW50ZXIpO1xuXG4gIGFkZENvdW50TGVuZ3RoRXZlbnQoaW5wdXQsIGN1cnJlbnRUZXh0Q291bnQpO1xuXG4gIHJldHVybiBjb250YWluZXI7XG59O1xuXG5jb25zdCBhcHBlbmRUZXh0QXJlYUlucHV0ID0gKFxuICBpbnB1dElkLFxuICBwbGFjZWhvbGRlcixcbiAgbWF4TGVuZ3RoID0gMTAsXG4gIHJvd3MgPSAxLFxuICBhdXRvRm9jdXMgPSBmYWxzZSxcbiAgaW5pdGlhbFZhbHVlID0gbnVsbFxuKSA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbnRhaW5lci5jbGFzc05hbWUgPSBcInRleHRhcmVhLWlucHV0LWNvbnRhaW5lclwiO1xuXG4gIGNvbnN0IGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRleHRhcmVhXCIpO1xuICBpbnB1dC5pZCA9IGlucHV0SWQ7XG4gIGlucHV0Lm5hbWUgPSBpbnB1dElkO1xuICBpbnB1dC5wbGFjZWhvbGRlciA9IHBsYWNlaG9sZGVyO1xuICBpbnB1dC5tYXhMZW5ndGggPSBtYXhMZW5ndGgudG9TdHJpbmcoKTtcbiAgaW5wdXQucm93cyA9IHJvd3MudG9TdHJpbmcoKTtcbiAgaW5wdXQuYXV0b2ZvY3VzID0gYXV0b0ZvY3VzO1xuICBpbnB1dC52YWx1ZSA9IGluaXRpYWxWYWx1ZTtcblxuICBjb25zdCB0ZXh0Q291bnRlciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICB0ZXh0Q291bnRlci5jbGFzc05hbWUgPSBcInRleHQtY291bnRlclwiO1xuXG4gIGNvbnN0IGN1cnJlbnRUZXh0Q291bnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgY3VycmVudFRleHRDb3VudC5jbGFzc05hbWUgPSBcImN1cnJlbnQtY291bnRcIjtcbiAgY3VycmVudFRleHRDb3VudC50ZXh0Q29udGVudCA9IGlucHV0LnZhbHVlLmxlbmd0aDtcblxuICBjb25zdCBjb3VudGVyTGltaXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgY291bnRlckxpbWl0LmNsYXNzTmFtZSA9IFwiY291bnRlci1saW1pdFwiO1xuICBjb3VudGVyTGltaXQudGV4dENvbnRlbnQgPSBgIC8gJHttYXhMZW5ndGh9YDtcblxuICB0ZXh0Q291bnRlci5hcHBlbmRDaGlsZChjdXJyZW50VGV4dENvdW50KTtcbiAgdGV4dENvdW50ZXIuYXBwZW5kQ2hpbGQoY291bnRlckxpbWl0KTtcblxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXQpO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQodGV4dENvdW50ZXIpO1xuXG4gIGFkZENvdW50TGVuZ3RoRXZlbnQoaW5wdXQsIGN1cnJlbnRUZXh0Q291bnQpO1xuXG4gIHJldHVybiBjb250YWluZXI7XG59O1xuXG5jb25zdCBhcHBlbmRTZWxlY3RJbnB1dCA9IChcbiAgaW5wdXRJZCxcbiAgaWNvbixcbiAgb3B0aW9uc0FycmF5ID0gW3sgaWNvbjogZGVmYXVsdFN2ZywgbmFtZTogXCJObyBvcHRpb25zXCIgfV0sXG4gIGluaXRpYWxPcHRpb25JbmRleCA9IDBcbikgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzZWxlY3QtaW5wdXRcIjtcbiAgaWYgKGlucHV0SWQpIGNvbnRhaW5lci5pZCA9IGlucHV0SWQ7XG5cbiAgY29uc3QgaW5wdXRCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO1xuICBpbnB1dEJ1dHRvbi5jbGFzc05hbWUgPSBcInNlbGVjdC1idXR0b25cIjtcblxuICBjb25zdCBidXR0b25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICBidXR0b25MYWJlbC5jbGFzc05hbWUgPSBcImJ1dHRvbi1sYWJlbFwiO1xuXG4gIGNvbnN0IGJ1dHRvbkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgYnV0dG9uSWNvbi5jbGFzc05hbWUgPSBcImJ1dHRvbi1pY29uXCI7XG4gIGJ1dHRvbkljb24uaW5uZXJIVE1MID0gaWNvbjtcblxuICAvLyBPcHRpb25zXG4gIGNvbnN0IG9wdGlvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBvcHRpb25zQ29udGFpbmVyLmNsYXNzTmFtZSA9IFwib3B0aW9uc1wiO1xuXG4gIG9wdGlvbnNBcnJheS5mb3JFYWNoKChvcHRpb24pID0+IHtcbiAgICBjb25zdCBvcHRpb25FbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gICAgb3B0aW9uRWxlbWVudC5jbGFzc05hbWUgPSBcIm9wdGlvblwiO1xuICAgIG9wdGlvbkVsZW1lbnQuZGF0YXNldC52YWx1ZSA9IG9wdGlvbi5uYW1lO1xuXG4gICAgY29uc3Qgb3B0aW9uSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIG9wdGlvbkljb24uY2xhc3NOYW1lID0gXCJvcHRpb24taWNvblwiO1xuICAgIG9wdGlvbkljb24uaW5uZXJIVE1MID0gb3B0aW9uLmljb247XG5cbiAgICBjb25zdCBvcHRpb25MYWJlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIG9wdGlvbkxhYmVsLmNsYXNzTmFtZSA9IFwib3B0aW9uLWxhYmVsXCI7XG4gICAgb3B0aW9uTGFiZWwudGV4dENvbnRlbnQgPSBvcHRpb24ubmFtZTtcblxuICAgIG9wdGlvbkVsZW1lbnQuYXBwZW5kQ2hpbGQob3B0aW9uSWNvbik7XG4gICAgb3B0aW9uRWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb25MYWJlbCk7XG5cbiAgICBvcHRpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKG9wdGlvbkVsZW1lbnQpO1xuICB9KTtcblxuICBpbnB1dEJ1dHRvbi5hcHBlbmRDaGlsZChidXR0b25JY29uKTtcbiAgaW5wdXRCdXR0b24uYXBwZW5kQ2hpbGQoYnV0dG9uTGFiZWwpO1xuXG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChpbnB1dEJ1dHRvbik7XG4gIGNvbnRhaW5lci5hcHBlbmRDaGlsZChvcHRpb25zQ29udGFpbmVyKTtcblxuICAvLyBBdXRvLXNlbGVjdCBmaXJzdCBvcHRpb25cbiAgaWYgKGluaXRpYWxPcHRpb25JbmRleCA8IDAgfHwgaW5pdGlhbE9wdGlvbkluZGV4ID49IG9wdGlvbnNBcnJheS5sZW5ndGgpXG4gICAgaW5pdGlhbE9wdGlvbkluZGV4ID0gMDtcblxuICBzZWxlY3RPcHRpb25WYWx1ZShcbiAgICBjb250YWluZXIsXG4gICAgb3B0aW9uc0NvbnRhaW5lci5jaGlsZE5vZGVzW2luaXRpYWxPcHRpb25JbmRleF0uZGF0YXNldC52YWx1ZVxuICApO1xuXG4gIC8vIFNlbGVjdCBsaXN0IEV2ZW50c1xuICBhZGRFeHBhbmRPcHRpb25zRXZlbnQoY29udGFpbmVyLCBpbnB1dEJ1dHRvbik7XG4gIGFkZFNlbGVjdE9wdGlvblZhbHVlRXZlbnQoY29udGFpbmVyKTtcblxuICByZXR1cm4gY29udGFpbmVyO1xufTtcblxuY29uc3QgYXBwZW5kU2VsZWN0SW5wdXRHcmlkID0gKFxuICBpbnB1dElkLFxuICBvcHRpb25zQXJyYXkgPSBbZGVmYXVsdFN2Z10sXG4gIGluaXRpYWxPcHRpb25JbmRleCA9IDBcbikgPT4ge1xuICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBjb250YWluZXIuY2xhc3NOYW1lID0gXCJzZWxlY3QtaW5wdXQtZ3JpZFwiO1xuICBpZiAoaW5wdXRJZCkgY29udGFpbmVyLmlkID0gaW5wdXRJZDtcblxuICBjb25zdCBpbnB1dEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7XG4gIGlucHV0QnV0dG9uLmNsYXNzTmFtZSA9IFwic2VsZWN0LWJ1dHRvblwiO1xuXG4gIGNvbnN0IGJ1dHRvbkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgYnV0dG9uSWNvbi5jbGFzc05hbWUgPSBcImJ1dHRvbi1pY29uXCI7XG5cbiAgLy8gT3B0aW9uc1xuICBjb25zdCBvcHRpb25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgb3B0aW9uc0NvbnRhaW5lci5jbGFzc05hbWUgPSBcIm9wdGlvbnMtZ3JpZFwiO1xuXG4gIG9wdGlvbnNBcnJheS5mb3JFYWNoKChvcHRpb25JY29uKSA9PiB7XG4gICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NOYW1lID0gXCJvcHRpb25cIjtcbiAgICBvcHRpb25FbGVtZW50LmlubmVySFRNTCA9IG9wdGlvbkljb247XG5cbiAgICBvcHRpb25zQ29udGFpbmVyLmFwcGVuZENoaWxkKG9wdGlvbkVsZW1lbnQpO1xuICB9KTtcblxuICBpbnB1dEJ1dHRvbi5hcHBlbmRDaGlsZChidXR0b25JY29uKTtcblxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoaW5wdXRCdXR0b24pO1xuICBjb250YWluZXIuYXBwZW5kQ2hpbGQob3B0aW9uc0NvbnRhaW5lcik7XG5cbiAgLy8gQXV0by1zZWxlY3QgZmlyc3Qgb3B0aW9uXG4gIGlmIChpbml0aWFsT3B0aW9uSW5kZXggPCAwIHx8IGluaXRpYWxPcHRpb25JbmRleCA+PSBvcHRpb25zQXJyYXkubGVuZ3RoKVxuICAgIGluaXRpYWxPcHRpb25JbmRleCA9IDA7XG5cbiAgc2VsZWN0T3B0aW9uVmFsdWVHcmlkKGNvbnRhaW5lciwgaW5pdGlhbE9wdGlvbkluZGV4KTtcblxuICAvLyBTZWxlY3QgbGlzdCBncmlkIGV2ZW50c1xuICBhZGRFeHBhbmRPcHRpb25zRXZlbnQoY29udGFpbmVyLCBpbnB1dEJ1dHRvbik7XG4gIGFkZFNlbGVjdE9wdGlvblZhbHVlR3JpZEV2ZW50KGNvbnRhaW5lcik7XG5cbiAgcmV0dXJuIGNvbnRhaW5lcjtcbn07XG5cbmNvbnN0IGFwcGVuZERhdGVJbnB1dCA9IChpbnB1dElkLCBpY29uKSA9PiB7XG4gIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gIGNvbnRhaW5lci5pZCA9IGlucHV0SWQ7XG5cbiAgY29uc3QgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG4gIGlucHV0LnR5cGUgPSBcImRhdGVcIjtcbiAgaW5wdXQuY2xhc3NOYW1lID0gXCJkYXRlLWVsZW1lbnRcIjtcblxuICBjb250YWluZXIuZGF0YXNldC52YWx1ZSA9IGlucHV0LnZhbHVlO1xuXG4gIGNvbnN0IGlucHV0QnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgaW5wdXRCdXR0b24uY2xhc3NOYW1lID0gXCJkYXRlLWJ1dHRvblwiO1xuXG4gIGNvbnN0IGJ1dHRvbkxhYmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7XG4gIGJ1dHRvbkxhYmVsLmNsYXNzTmFtZSA9IFwiYnV0dG9uLWxhYmVsXCI7XG4gIGJ1dHRvbkxhYmVsLnRleHRDb250ZW50ID0gXCJEYXRlXCI7XG5cbiAgY29uc3QgYnV0dG9uSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICBidXR0b25JY29uLmNsYXNzTmFtZSA9IFwiYnV0dG9uLWljb25cIjtcbiAgYnV0dG9uSWNvbi5pbm5lckhUTUwgPSBpY29uO1xuXG4gIGlucHV0QnV0dG9uLmFwcGVuZENoaWxkKGJ1dHRvbkljb24pO1xuICBpbnB1dEJ1dHRvbi5hcHBlbmRDaGlsZChidXR0b25MYWJlbCk7XG5cbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0KTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKGlucHV0QnV0dG9uKTtcblxuICBhZGRTaG93RGF0ZVBpY2tlckV2ZW50KGlucHV0QnV0dG9uLCBpbnB1dCk7XG4gIGNoYW5nZURhdGVWYWx1ZUV2ZW50KGNvbnRhaW5lcik7XG5cbiAgcmV0dXJuIGNvbnRhaW5lcjtcbn07XG5cbmNvbnN0IGFwcGVuZE9wdGlvbnNCdXR0b24gPSAoXG4gIGljb24sXG4gIGNvbnRyb2xsZXJDbGFzcyxcbiAgb3B0aW9uc0FycmF5ID0gW3sgbGFiZWw6IFwiT3B0aW9uXCIsIGljb246IGRlZmF1bHRTdmcsIG9wdGlvbkNsYXNzOiBcIm9wdGlvblwiIH1dXG4pID0+IHtcbiAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgY29udGFpbmVyLmNsYXNzTGlzdC5hZGQoXCJvcHRpb25zLWNvbnRyb2xsZXJcIik7XG4gIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKGNvbnRyb2xsZXJDbGFzcyk7XG5cbiAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImJ1dHRvblwiKTtcbiAgYnV0dG9uLmNsYXNzTmFtZSA9IFwib3B0aW9ucy1jb250cm9sbGVyLWJ1dHRvblwiO1xuXG4gIGNvbnN0IGJ1dHRvbkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgYnV0dG9uSWNvbi5jbGFzc05hbWUgPSBcImJ1dHRvbi1pY29uXCI7XG4gIGJ1dHRvbkljb24uaW5uZXJIVE1MID0gaWNvbjtcblxuICBjb25zdCBvcHRpb25zQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgb3B0aW9uc0NvbnRhaW5lci5jbGFzc05hbWUgPSBcIm9wdGlvbnNcIjtcblxuICBvcHRpb25zQXJyYXkuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgY29uc3Qgb3B0aW9uRWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO1xuICAgIG9wdGlvbkVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm9wdGlvblwiKTtcbiAgICBvcHRpb25FbGVtZW50LmNsYXNzTGlzdC5hZGQob3B0aW9uLm9wdGlvbkNsYXNzKTtcblxuICAgIGNvbnN0IG9wdGlvbkljb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBvcHRpb25JY29uLmNsYXNzTmFtZSA9IFwib3B0aW9uLWljb25cIjtcbiAgICBvcHRpb25JY29uLmlubmVySFRNTCA9IG9wdGlvbi5pY29uO1xuXG4gICAgY29uc3Qgb3B0aW9uTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtcbiAgICBvcHRpb25MYWJlbC5jbGFzc05hbWUgPSBcIm9wdGlvbi1sYWJlbFwiO1xuICAgIG9wdGlvbkxhYmVsLnRleHRDb250ZW50ID0gb3B0aW9uLmxhYmVsO1xuXG4gICAgb3B0aW9uRWxlbWVudC5hcHBlbmRDaGlsZChvcHRpb25JY29uKTtcbiAgICBvcHRpb25FbGVtZW50LmFwcGVuZENoaWxkKG9wdGlvbkxhYmVsKTtcblxuICAgIG9wdGlvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQob3B0aW9uRWxlbWVudCk7XG4gIH0pO1xuXG4gIGJ1dHRvbi5hcHBlbmRDaGlsZChidXR0b25JY29uKTtcblxuICBjb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcbiAgY29udGFpbmVyLmFwcGVuZENoaWxkKG9wdGlvbnNDb250YWluZXIpO1xuXG4gIGFkZEV4cGFuZE9wdGlvbnNFdmVudChjb250YWluZXIsIGJ1dHRvbik7XG4gIGFkZENsb3NlT3B0aW9uc0V2ZW50KGNvbnRhaW5lciwgb3B0aW9uc0NvbnRhaW5lci5jaGlsZE5vZGVzKTtcblxuICByZXR1cm4gY29udGFpbmVyO1xufTtcblxuLy8gQ3VzdG9tIGlucHV0cyBldmVudHNcbmNvbnN0IGFkZENvdW50TGVuZ3RoRXZlbnQgPSAoaW5wdXQsIGNvdW50ZXIpID0+IHtcbiAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcbiAgICBcImlucHV0XCIsXG4gICAgKCkgPT4gKGNvdW50ZXIudGV4dENvbnRlbnQgPSBpbnB1dC52YWx1ZS5sZW5ndGgpXG4gICk7XG59O1xuXG5jb25zdCBhZGRFeHBhbmRPcHRpb25zRXZlbnQgPSAoY29udGFpbmVyLCBleHBhbmRCdXR0b24pID0+IHtcbiAgLy8gY29uc3QgYnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuc2VsZWN0LWJ1dHRvblwiKTtcblxuICBleHBhbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XG4gICAgY29udGFpbmVyLmNsYXNzTGlzdC50b2dnbGUoXCJleHBhbmRcIilcbiAgKTtcbn07XG5cbmNvbnN0IGFkZENsb3NlT3B0aW9uc0V2ZW50ID0gKGNvbnRhaW5lciwgb3B0aW9uQnV0dG9ucykgPT4ge1xuICBvcHRpb25CdXR0b25zLmZvckVhY2goKG9wdGlvbikgPT5cbiAgICBvcHRpb24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGNvbnRhaW5lci5jbGFzc0xpc3QucmVtb3ZlKFwiZXhwYW5kXCIpKVxuICApO1xufTtcblxuY29uc3Qgc2VsZWN0T3B0aW9uVmFsdWUgPSAoc2VsZWN0SW5wdXQsIG9wdGlvblZhbHVlKSA9PiB7XG4gIGNvbnN0IGJ1dHRvbkxhYmVsID0gc2VsZWN0SW5wdXQucXVlcnlTZWxlY3RvcihcIi5idXR0b24tbGFiZWxcIik7XG4gIGNvbnN0IGJ1dHRvbkljb24gPSBzZWxlY3RJbnB1dC5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbi1pY29uXCIpO1xuICBjb25zdCBvcHRpb24gPSBzZWxlY3RJbnB1dC5xdWVyeVNlbGVjdG9yKFxuICAgIGAub3B0aW9uW2RhdGEtdmFsdWU9XCIke29wdGlvblZhbHVlfVwiXWBcbiAgKTtcbiAgY29uc3Qgb3B0aW9uSWNvbiA9IG9wdGlvbi5xdWVyeVNlbGVjdG9yKFwiLm9wdGlvbi1pY29uXCIpO1xuXG4gIHNlbGVjdElucHV0LmRhdGFzZXQudmFsdWUgPSBvcHRpb24uZGF0YXNldC52YWx1ZTtcbiAgYnV0dG9uTGFiZWwudGV4dENvbnRlbnQgPSBvcHRpb24uZGF0YXNldC52YWx1ZTtcbiAgYnV0dG9uSWNvbi5pbm5lckhUTUwgPSBvcHRpb25JY29uLmlubmVySFRNTDsgLy8gRml4IHRoaXNcbn07XG5cbmNvbnN0IGFkZFNlbGVjdE9wdGlvblZhbHVlRXZlbnQgPSAoc2VsZWN0SW5wdXQpID0+IHtcbiAgY29uc3Qgb3B0aW9ucyA9IHNlbGVjdElucHV0LnF1ZXJ5U2VsZWN0b3JBbGwoXCIub3B0aW9uXCIpO1xuXG4gIG9wdGlvbnMuZm9yRWFjaCgob3B0aW9uKSA9PiB7XG4gICAgb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBzZWxlY3RPcHRpb25WYWx1ZShzZWxlY3RJbnB1dCwgb3B0aW9uLmRhdGFzZXQudmFsdWUpO1xuICAgICAgc2VsZWN0SW5wdXQuY2xhc3NMaXN0LnJlbW92ZShcImV4cGFuZFwiKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBzZWxlY3RPcHRpb25WYWx1ZUdyaWQgPSAoc2VsZWN0SW5wdXRHcmlkLCBvcHRpb25JbmRleCkgPT4ge1xuICBjb25zdCBidXR0b25JY29uID0gc2VsZWN0SW5wdXRHcmlkLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uLWljb25cIik7XG4gIGNvbnN0IG9wdGlvbiA9IHNlbGVjdElucHV0R3JpZC5xdWVyeVNlbGVjdG9yQWxsKFwiLm9wdGlvblwiKVtvcHRpb25JbmRleF07XG5cbiAgYnV0dG9uSWNvbi5pbm5lckhUTUwgPSBvcHRpb24uaW5uZXJIVE1MO1xufTtcblxuY29uc3QgYWRkU2VsZWN0T3B0aW9uVmFsdWVHcmlkRXZlbnQgPSAoc2VsZWN0SW5wdXRHcmlkKSA9PiB7XG4gIGNvbnN0IG9wdGlvbnMgPSBzZWxlY3RJbnB1dEdyaWQucXVlcnlTZWxlY3RvckFsbChcIi5vcHRpb25cIik7XG5cbiAgb3B0aW9ucy5mb3JFYWNoKChvcHRpb24sIGluZGV4KSA9PiB7XG4gICAgb3B0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgICBzZWxlY3RPcHRpb25WYWx1ZUdyaWQoc2VsZWN0SW5wdXRHcmlkLCBpbmRleCk7XG4gICAgICBzZWxlY3RJbnB1dEdyaWQuY2xhc3NMaXN0LnJlbW92ZShcImV4cGFuZFwiKTtcbiAgICB9KTtcbiAgfSk7XG59O1xuXG5jb25zdCBjaGFuZ2VEYXRlVmFsdWVFdmVudCA9IChpbnB1dENvbnRhaW5lcikgPT4ge1xuICBjb25zdCBkYXRlSW5wdXQgPSBpbnB1dENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiaW5wdXQuZGF0ZS1lbGVtZW50XCIpO1xuXG4gIGRhdGVJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsICgpID0+XG4gICAgc2VsZWN0RGF0ZVZhbHVlKGlucHV0Q29udGFpbmVyLCBkYXRlSW5wdXQudmFsdWUpXG4gICk7XG59O1xuXG5jb25zdCBzZWxlY3REYXRlVmFsdWUgPSAoaW5wdXRDb250YWluZXIsIG5ld1ZhbHVlKSA9PiB7XG4gIGNvbnN0IGlucHV0ID0gaW5wdXRDb250YWluZXIucXVlcnlTZWxlY3RvcihcImlucHV0LmRhdGUtZWxlbWVudFwiKTtcbiAgY29uc3QgYnV0dG9uTGFiZWwgPSBpbnB1dENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKFwiLmJ1dHRvbi1sYWJlbFwiKTtcbiAgY29uc3QgYnV0dG9uSWNvbiA9IGlucHV0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoXCIuYnV0dG9uLWljb25cIik7XG5cbiAgaW5wdXRDb250YWluZXIuZGF0YXNldC52YWx1ZSA9IG5ld1ZhbHVlO1xuICBpbnB1dC52YWx1ZSA9IG5ld1ZhbHVlO1xuICBidXR0b25MYWJlbC50ZXh0Q29udGVudCA9IG5ld1ZhbHVlIHx8IFwiRGF0ZVwiO1xuICBidXR0b25JY29uLmlubmVySFRNTCA9IG5ld1ZhbHVlID8gZGF0ZVNlbGVjdGVkU3ZnIDogZGF0ZVVuc2VsZWN0ZWRTdmc7XG59O1xuXG5jb25zdCBhZGRTaG93RGF0ZVBpY2tlckV2ZW50ID0gKGlucHV0QnV0dG9uLCBkYXRlSW5wdXQpID0+IHtcbiAgaW5wdXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IGRhdGVJbnB1dC5zaG93UGlja2VyKCkpO1xufTtcblxuZXhwb3J0IHtcbiAgYXBwZW5kRGlhbG9nQnV0dG9ucyxcbiAgYXBwZW5kVGV4dElucHV0LFxuICBhcHBlbmRUZXh0QXJlYUlucHV0LFxuICBhcHBlbmRTZWxlY3RJbnB1dCxcbiAgYXBwZW5kU2VsZWN0SW5wdXRHcmlkLFxuICBhcHBlbmREYXRlSW5wdXQsXG4gIGFwcGVuZE9wdGlvbnNCdXR0b24sXG4gIHNlbGVjdE9wdGlvblZhbHVlLFxuICBzZWxlY3RPcHRpb25WYWx1ZUdyaWQsXG4gIHNlbGVjdERhdGVWYWx1ZSxcbn07XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=